kde4_header()

add_subdirectory( src )
add_subdirectory( pics )

include_directories( ${CMAKE_SOURCE_DIR} ${CMAKE_BINARY_DIR} ${CMAKE_SOURCE_DIR}/kyzis/src/newui/ ${CMAKE_SOURCE_DIR}/kyzis/src/ ${CMAKE_SOURCE_DIR}/libyzis/ ${CMAKE_BINARY_DIR}/libyzis/ ${KDE4_INCLUDE_DIR} ${QT_INCLUDES}  )

########### next target ###############

set(kyzis_SRCS main.cpp )
kde4_automoc(${kyzis_SRCS})
kde4_add_executable(kyzis ${kyzis_SRCS})
target_link_libraries(kyzis ${KDE4_KDECORE_LIBS} ktexteditor ${KDE4_KPARTS_LIBS} yzis internkyzis d)
install_targets(/bin kyzis )

########### next target ###############

set(kyzispart_PART_SRCS dummy.cpp )
kde4_automoc(${kyzispart_PART_SRCS})
file(WRITE dummy.cpp "//autogenerated file by cmake\n")
kde4_add_plugin(kyzispart ${kyzispart_PART_SRCS})
kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} kyzispart )
target_link_libraries(kyzispart ${KDE4_KDECORE_LIBS} ${KDE4_KPARTS_LIBS} ktexteditor yzis internkyzis )
install_targets(${PLUGIN_INSTALL_DIR} kyzispart )

########### install files ###############

install_files( ${SERVICES_INSTALL_DIR} FILES  kyzispart.desktop )
install_files( ${DATA_INSTALL_DIR}/kyzispart FILES  kyzispart.rc )
install_files( ${DATA_INSTALL_DIR}/kyzis FILES  kyzis_shell.rc )
install_files( ${APPLNK_INSTALL_DIR}/Editors FILES  kyzis.desktop )

kde4_footer()

#
#install-exec-hook:
#	-@for i in `ls $(top_builddir)/translations/*.gmo`; do \
#		if test ! -f $(DESTDIR)/`$(KDECONFIG) --install locale --expandvars`/`basename $$i .gmo`/LC_MESSAGES/yzis.mo ; then \
#			$(mkinstalldirs) $(DESTDIR)/`$(KDECONFIG) --install locale --expandvars`/`basename $$i .gmo`/LC_MESSAGES/ ; \
#			$(LN_S) $(DESTDIR)$(prefix)/share/locale/`basename $$i .gmo`/LC_MESSAGES/yzis.mo $(DESTDIR)/`$(KDECONFIG) --install locale --expandvars`/`basename $$i .gmo`/LC_MESSAGES/ ; \
#		fi ; \
#	done
#
