--- acinclude.m4.in.orig	2005-10-22 14:32:42.000000000 +0200
+++ acinclude.m4.in	2005-10-22 14:32:36.000000000 +0200
@@ -412,7 +412,7 @@
     kde_datadir='\${datadir}/apps'
   fi
   if test -z "$kde_locale"; then
-    kde_locale='\${datadir}/locale'
+    kde_locale='\${prefix}/share/locale'
   fi
   if test -z "$kde_cgidir"; then
     kde_cgidir='\${exec_prefix}/cgi-bin'
@@ -486,17 +486,12 @@
 
 AC_DEFUN([KDE_MISSING_PROG_ERROR],
 [
-    AC_MSG_ERROR([The important program $1 was not found!
-Please check whether you installed KDE correctly.
-])
+	have_kde="no"
 ])
 
 AC_DEFUN([KDE_MISSING_ARTS_ERROR],
 [
-    AC_MSG_ERROR([The important program $1 was not found!
-Please check whether you installed aRts correctly or use
---without-arts to compile without aRts support (this will remove functionality).
-])
+	have_kde="no"
 ])
 
 AC_DEFUN([KDE_SET_DEFAULT_BINDIRS],
@@ -1161,8 +1156,8 @@
   fi
 fi
 
-LIBQT="-lQtGui_debug"
-kde_int_qt="-lQtGui_debug"
+LIBQT="-lQtCore_debug"
+kde_int_qt="-lQtCore_debug"
 
 AC_REQUIRE([AC_FIND_PNG])
 AC_REQUIRE([AC_FIND_JPEG])
@@ -1311,9 +1306,9 @@
 AC_SUBST(qt_includes)
 
 if test "$qt_includes" = "$x_includes" || test -z "$qt_includes"; then
- QT_INCLUDES="-I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtGui -I$qt_includes/QtXml -I$qt_includes/Qt3Support"
+ QT_INCLUDES="-I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtXml -I$qt_includes/Qt3Support"
 else
- QT_INCLUDES="-I$qt_includes -I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtGui -I$qt_includes/QtXml -I$qt_includes/Qt3Support"
+ QT_INCLUDES="-I$qt_includes -I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtXml -I$qt_includes/Qt3Support"
  all_includes="$QT_INCLUDES $all_includes"
 fi
 
@@ -1393,15 +1388,7 @@
 
 AC_MSG_RESULT([$kde_cv_uic_plugins])
 if test "$kde_cv_uic_plugins" != yes; then
-	AC_MSG_ERROR([
-you need to install kdelibs first.
-
-If you did install kdelibs, then the Qt version that is picked up by
-this configure is not the same version you used to compile kdelibs. 
-The Qt Plugin installed by kdelibs is *ONLY* loadable if it is the
-_same Qt version_, compiled with the _same compiler_ and the same Qt
-configuration settings.
-])
+ 	have_kde="no"
 fi
 fi
 ])
@@ -1545,9 +1532,7 @@
 ac_kde_includes="$kde_incdir"
 
 if test -n "$ac_kde_includes" && test ! -r "$ac_kde_includes/$kde_check_header"; then
-  AC_MSG_ERROR([
-in the prefix, you've chosen, are no KDE headers installed. This will fail.
-So, check this please and use another prefix!])
+	have_kde="no"
 fi
 
 if grep -q DONTPORT $ac_kde_includes/kdeversion.h; then
@@ -1565,15 +1550,11 @@
 AC_FIND_FILE("kde4/plugins/designer/kdewidgets.la", $kde_libdirs, kde_widgetdir)
 
 if test -n "$ac_kde_libraries" && test ! -r "$ac_kde_libraries/$kde_check_lib"; then
-AC_MSG_ERROR([
-in the prefix, you've chosen, are no KDE libraries installed. This will fail.
-So, check this please and use another prefix!])
+	have_kde="no"
 fi
 
 if test -n "$kde_widgetdir" && test ! -r "$kde_widgetdir/kde4/plugins/designer/kdewidgets.la"; then
-AC_MSG_ERROR([
-I can't find the designer plugins. These are required and should have been installed
-by kdelibs])
+	have_kde="no"
 fi
 
 if test -n "$kde_widgetdir"; then
@@ -1650,7 +1631,9 @@
 AC_SUBST(all_libraries)
 
 if test -z "$1"; then
-KDE_CHECK_UIC_PLUGINS
+	if test "$have_kde" != "no"; then
+		KDE_CHECK_UIC_PLUGINS
+	fi
 fi
 
 ac_kde_libraries="$kde_libdir"
@@ -2660,6 +2643,7 @@
 
 ])
 
+
 dnl AC_VALIDIFY_CXXFLAGS checks for forbidden flags the user may have given
 AC_DEFUN([AC_VALIDIFY_CXXFLAGS],
 [dnl
@@ -4518,21 +4502,18 @@
   KDE_SET_DEFAULT_BINDIRS
   if test "x$prefix" = "xNONE"; then
     dnl no prefix given: look for kde-config in the PATH and deduce the prefix from it
-    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(kde-config)], [], prepend)
+    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [], [], prepend)
   else
     dnl prefix given: look for kde-config, preferrably in prefix, otherwise in PATH
     kde_save_PATH="$PATH"
     PATH="$exec_prefix/bin:$prefix/bin:$PATH"
-    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(kde-config)], [], prepend)
+    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [], [], prepend)
     PATH="$kde_save_PATH"
   fi
 
   kde_libs_prefix=`$KDECONFIG --prefix`
   if test -z "$kde_libs_prefix" || test ! -x "$kde_libs_prefix"; then
-       AC_MSG_ERROR([$KDECONFIG --prefix outputed the non existant prefix '$kde_libs_prefix' for kdelibs.
-                    This means it has been moved since you installed it.
-                    This won't work. Please recompile kdelibs for the new prefix.
-                    ])
+  	have_kde="no"
   fi
   kde_libs_htmldir=`$KDECONFIG --install html --expandvars`
   kde_libs_suffix=`$KDECONFIG --libsuffix`
